<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Meta Information -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Curious</title>

  <!-- Google Tag Manager -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-T9S88HFP32"></script>
  <script src="/scripts/gtag.js" defer></script>

  <!-- Fallback Styles -->
  <link rel="stylesheet" href="./assets/css/style.css">

  <!-- Dynamic Theme and Page Scripts -->
  <script src="/scripts/v2-config.js" defer></script>
  <script src="/scripts/v2-fetch.js" defer></script>
  <script src="/scripts/v2-talk-banner.js" defer></script>
  <script src="/scripts/v2-version.js" defer></script>
  <script src="scanner.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jsqr/dist/jsQR.js"></script>

  <style>
    #camera-popup {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    #camera-feed {
      max-width: 100%;
      max-height: 100%;
    }

    #close-popup {
      position: absolute;
      top: 10px;
      right: 10px;
      background: white;
      border: none;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      z-index: 1001;
    }
  </style>

</head>

<body class="hidden" style="background-color: #f4f4f4;">
  <header style="text-align: left;">
    <a href="get-started.html">
      <img id="site-logo" alt="Site Logo" style="display: none;">
    </a>
    <h1 id="exhibit-title">Explore Species</h1>
  </header>

  <main>

    <button id="start-scan">Scan QR Code</button>

    <div id="camera-popup">
      <button id="close-popup">Close</button>
      <video id="camera-feed" autoplay></video>
      <canvas id="canvas" style="display: none;"></canvas>
    </div>  

    <br>
    <!-- Back button -->
    <div id="back-button-container" style="text-align: center; margin: 10px 0; display: none;">
      <button onclick="window.history.back()" class="back-button">‚Üê Back</button>
    </div>

    <!-- Area for presenting species content, generated by fetch.js -->
    <div id="content"></div>
  
    <!-- Custom audio play prompt -->
    <div id="audio-container" class="center-container" style="display: none;">
      <button id="play-audio" class="play-button">
        ‚ñ∂ Play Audio
      </button>
      <div class="pause-restart-group">
        <button id="restart-audio" class="pause-restart-button" style="display: none;">
          üîÑ Restart
        </button>
        <button id="pause-audio" class="pause-restart-button" style="display: none;">
          ‚è∏ Pause
        </button>
      </div>
      <br>
      <p id="audio-status" class="status-text"></p>
    </div>
  
    <!-- Hidden audio player -->
    <audio id="audio-player" style="display: none;">
      <source id="audio-source" src="" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>
  </main>

  <footer>
    <a href="/index.html">
      <img src="/assets/images/logo.png" alt="Curious Logo">
    </a>
  </footer>
</body>
</html>
